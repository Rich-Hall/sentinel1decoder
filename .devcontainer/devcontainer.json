{
	"name": "Sentinel1 Decoder Dev Container",
	"build": {
		"dockerfile": "Dockerfile",
		"context": ".."
	},
	
	// Mount the workspace folder
	"workspaceFolder": "/app",
	"workspaceMount": "source=${localWorkspaceFolder},target=/app,type=bind,consistency=cached",
	
	// Port forwarding for Jupyter and other services
	"forwardPorts": [8888, 8000],
	"portsAttributes": {
		"8888": {
			"label": "Jupyter",
			"onAutoForward": "notify"
		},
		"8000": {
			"label": "Application",
			"onAutoForward": "ignore"
		}
	},
	
	// VS Code/Cursor extensions to install
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-python.python",
				"ms-python.vscode-pylance",
				"rust-lang.rust-analyzer",
				"ms-toolsai.jupyter",
				"ms-python.black-formatter",
				"ms-python.isort",
				"ms-python.mypy-type-checker",
				"charliermarsh.ruff"
			],
			"settings": {
				"python.defaultInterpreterPath": "/opt/venv/bin/python",
				"python.terminal.activateEnvironment": true,
				"python.linting.enabled": true,
				"python.linting.pylintEnabled": false,
				"python.linting.flake8Enabled": true,
				"python.formatting.provider": "black",
				"python.formatting.blackArgs": ["--line-length", "120"],
				"editor.formatOnSave": true,
				"editor.codeActionsOnSave": {
					"source.organizeImports": true
				},
				"[python]": {
					"editor.defaultFormatter": "ms-python.black-formatter",
					"editor.formatOnSave": true
				},
				"[rust]": {
					"editor.defaultFormatter": "rust-lang.rust-analyzer",
					"editor.formatOnSave": true
				},
				"rust-analyzer.checkOnSave": true,
				"rust-analyzer.cargo.allFeatures": true
			}
		}
	},
	
	// Commands to run after container is created
	"postCreateCommand": "VIRTUAL_ENV=/opt/venv maturin develop",
	
	// Commands to run when attaching to container
	"postAttachCommand": "echo 'Dev container ready! Rust extension built with maturin.'",
	
	// Use the same user as host (optional, can help with file permissions)
	"remoteUser": "root",
	
	// Features (optional, can add more tools if needed)
	"features": {}
}
